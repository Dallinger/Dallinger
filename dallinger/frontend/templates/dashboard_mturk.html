{% extends "base/dashboard.html" %}

{% block stylesheets %}
<style type="text/css">
    .popover-body { font-family: monospace; };
</style>
{% endblock %}

{% block body %}
<h1>MTurk Dashboard
<small class="text-muted" style="float: right">Last updated {{ data["last_updated"] }}
    <button type="button" class="btn btn-primary" onclick="location.reload()">
        Reload
    </button>
    <button type="button"
            class="btn btn-danger"
            data-toggle="popover" title="CLI Command"
            data-content="{{ data['expire_command'] }}">Expire HIT</button>
</small>
</h1>
{% if data %}

    <h2>General</h2>
    <div class="row">
      <div class="col-sm">Account Balance: {{ data["account_balance"] }}</div>
      <div class="col-sm"><a href="{{ data['requester_url'] }}">Requester Account</a></div>
      <div class="col-sm"><a href="{{ data['qualification_types_url'] }}">Qualification Types</a></div>
    </div>


    <h2>Current HIT Information</h2>

    {% if data["hit_info"] %}
        <table class="table table-sm table-striped">
        {% for key, value in data["hit_info"].items() %}
            <tr><th>{{ key }}</th><td>{{ value }}</td></tr>

        {% endfor %}
        </table>

        <h3>Preview of AD page running <a href="{{ data['ad_url'] }}">on Heroku</a></h3>
        <iframe width="100%" height="600" src="{{  data['ad_url'] }}" /></iframe>
    {% else %}
        <div class="alert alert-warning">
            HIT data not available until first participant joins.
        </div>
    {% endif %}


{% endif %}

{% endblock %}

{% block scripts %}
<script type="text/javascript">
$(function () {
  $('[data-toggle="popover"]').popover();
})
</script>
{% endblock %}
